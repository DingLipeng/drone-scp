sudo: required
language: go

go:
  - 1.6.x
  - 1.7.x
  - tip

cache:
  directories:
    - vendor
    - ${HOME}/.glide

before_install:
  - mkdir -p $GOPATH/bin
  - curl https://glide.sh/get | sh

install:
  - make dep_install

script:
  - make vet
  - make lint
  - make test
  - make build

after_success:
  # ignore main.go coverage
  - sed -i '/main.go/d' coverage.txt
  - bash <(curl -s https://codecov.io/bash) -f coverage.txt
